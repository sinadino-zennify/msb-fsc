<!-- 
ðŸ”´ AI AGENTS: READ FIRST - /docs/01-foundation/data-model.md for correct object names
âœ… Correct: ApplicationForm, Applicant, Account (Business), FinancialAccount
âŒ Wrong: Application__c, Applicant__c, Loan__c, Business_Relationship__c
-->

<template>
    <div class="applicant-details">
        <h2 class="slds-text-heading_medium slds-m-bottom_medium">Personal Information</h2>
        
        <template if:true={stepConfig.helpText}>
            <div class="slds-m-bottom_medium">
                <p class="slds-text-body_regular">{stepConfig.helpText}</p>
            </div>
        </template>
        
        <!-- Personal Identity Section -->
        <div class="slds-section slds-is-open slds-m-bottom_medium">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate slds-p-horizontal_small" title="Personal Identity">Personal Identity</span>
            </h3>
            <div class="slds-section__content slds-p-around_small">
                <lightning-layout multiple-rows>
                    <!-- Row 1: Salutation and First Name -->
                    <lightning-layout-item size="12" medium-device-size="1" padding="horizontal-small">
                        <lightning-combobox
                            label="Salutation"
                            value={salutation}
                            options={salutationOptions}
                            onchange={handleSalutationChange}
                            placeholder="Select">
                        </lightning-combobox>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12"  padding="horizontal-small">
                        <lightning-input 
                            label="First Name" 
                            value={firstName}
                            onchange={handleFirstNameChange}
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 2: Last Name -->
                    <lightning-layout-item size="12" padding="horizontal-small">
                        <lightning-input 
                            label="Last Name" 
                            value={lastName}
                            onchange={handleLastNameChange}
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 2: Date of Birth and Tax ID -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            label="Tax ID Number (SSN/ITIN)" 
                            value={taxId}
                            onchange={handleTaxIdChange}
                            placeholder="XXX-XX-XXXX"
                            pattern="\d{3}-\d{2}-\d{4}"
                            message-when-pattern-mismatch="SSN must be 9 digits in format XXX-XX-XXXX"
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-combobox
                            label="Tax ID Type"
                            value={taxIdType}
                            options={taxIdTypeOptions}
                            onchange={handleTaxIdTypeChange}
                            placeholder="Select type"
                            required>
                        </lightning-combobox>
                    </lightning-layout-item>
                    
                    <!-- Row 3: Tax ID Number -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            type="date"
                            label="Date of Birth" 
                            value={dateOfBirth}
                            onchange={handleDateOfBirthChange}
                            max={todayDate}
                            message-when-range-overflow="Date of Birth cannot be a future date"
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </div>

        <!-- Contact Information Section -->
        <div class="slds-section slds-is-open slds-m-bottom_medium">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate slds-p-horizontal_small" title="Contact Information">Contact Information</span>
            </h3>
            <div class="slds-section__content slds-p-around_small">
                <lightning-layout multiple-rows>
                    <!-- Row 1: Email and Phone -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            type="email"
                            label="Email" 
                            value={email}
                            onchange={handleEmailChange}
                            message-when-type-mismatch="Please enter a valid email address"
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            type="tel"
                            label="Mobile Phone" 
                            value={mobilePhone}
                            onchange={handleMobilePhoneChange}
                            pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}|\([0-9]{3}\) [0-9]{3}-[0-9]{4}|[0-9]{10}"
                            message-when-pattern-mismatch="Phone must be 10 digits (e.g., 555-555-5555)"
                            placeholder="555-555-5555"
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 2: Additional Phones -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            type="tel"
                            label="Home Phone" 
                            value={homePhone}
                            onchange={handleHomePhoneChange}
                            pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}|\([0-9]{3}\) [0-9]{3}-[0-9]{4}|[0-9]{10}"
                            message-when-pattern-mismatch="Phone must be 10 digits (e.g., 555-555-5555)"
                            placeholder="555-555-5555">
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            type="tel"
                            label="Work Phone" 
                            value={workPhone}
                            onchange={handleWorkPhoneChange}
                            pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}|\([0-9]{3}\) [0-9]{3}-[0-9]{4}|[0-9]{10}"
                            message-when-pattern-mismatch="Phone must be 10 digits (e.g., 555-555-5555)"
                            placeholder="555-555-5555">
                        </lightning-input>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </div>

        <!-- Mailing Address Section -->
        <div class="slds-section slds-is-open slds-m-bottom_medium">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate slds-p-horizontal_small" title="Mailing Address">Mailing Address</span>
            </h3>
            <div class="slds-section__content slds-p-around_small">
                <lightning-layout multiple-rows>
                    <!-- Row 1: Street Address Line 1 -->
                    <lightning-layout-item size="12" padding="horizontal-small">
                        <lightning-input 
                            label="Street Address Line 1" 
                            value={mailingStreetLine1}
                            onchange={handleMailingStreetLine1Change}
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 2: Street Address Line 2 -->
                    <lightning-layout-item size="12" padding="horizontal-small">
                        <lightning-input 
                            label="Street Address Line 2" 
                            value={mailingStreetLine2}
                            onchange={handleMailingStreetLine2Change}
                            placeholder="Apt, Suite, Unit, Building (optional)">
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 3: City, State, ZIP -->
                    <lightning-layout-item size="12" medium-device-size="4" padding="horizontal-small">
                        <lightning-input 
                            label="City" 
                            value={mailingCity}
                            onchange={handleMailingCityChange}
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="4" padding="horizontal-small">
                        <lightning-combobox
                            label="State"
                            value={mailingState}
                            options={stateOptions}
                            onchange={handleMailingStateChange}
                            placeholder="Select state"
                            required>
                        </lightning-combobox>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="4" padding="horizontal-small">
                        <lightning-input 
                            label="ZIP Code" 
                            value={mailingPostalCode}
                            onchange={handleMailingPostalCodeChange}
                            pattern="\d{5}(-\d{4})?"
                            message-when-pattern-mismatch="ZIP Code must be 5 or 9 digits (XXXXX or XXXXX-XXXX)"
                            placeholder="12345 or 12345-6789"
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 4: Country -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-combobox
                            label="Country"
                            value={mailingCountry}
                            options={countryOptions}
                            onchange={handleMailingCountryChange}
                            placeholder="Select country">
                        </lightning-combobox>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </div>

        <!-- Government ID Section -->
        <div class="slds-section slds-is-open slds-m-bottom_medium">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate slds-p-horizontal_small" title="Government ID">Government ID</span>
            </h3>
            <div class="slds-section__content slds-p-around_small">
                <lightning-layout multiple-rows>
                    <!-- Row 1: ID Type and Number -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-combobox
                            label="ID Type"
                            value={governmentIdType}
                            options={governmentIdTypeOptions}
                            onchange={handleGovernmentIdTypeChange}
                            placeholder="Select ID type"
                            required>
                        </lightning-combobox>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            label="ID Number" 
                            value={governmentIdNumber}
                            onchange={handleGovernmentIdNumberChange}
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 2: Issuing Country and State -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-combobox
                            label="Issued By - Country"
                            value={idIssuingCountry}
                            options={countryOptions}
                            onchange={handleIdIssuingCountryChange}
                            placeholder="Select country"
                            required>
                        </lightning-combobox>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            label="Issued By - State" 
                            value={idIssuingState}
                            onchange={handleIdIssuingStateChange}
                            placeholder="Enter state (if USA)">
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <!-- Row 3: Issue and Expiration Dates -->
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            type="date"
                            label="Issue Date" 
                            value={idIssueDate}
                            onchange={handleIdIssueDateChange}
                            max={todayDate}
                            message-when-range-overflow="Issue Date cannot be a future date"
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                    
                    <lightning-layout-item size="12" medium-device-size="6" padding="horizontal-small">
                        <lightning-input 
                            type="date"
                            label="Expiration Date" 
                            value={idExpirationDate}
                            onchange={handleIdExpirationDateChange}
                            required>
                        </lightning-input>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </div>
    </div>
</template>
